{
  "hash": "9fa4a42cf96d90abb9449475cdc6252a",
  "result": {
    "markdown": "---\ntitle: Explorer Fitness - 3\ndescription: Heart Rate Zone Training 2\nauthor: RJ Cody Markelz\ndate: 2023-09-01\ncategories: [GIS, data, exercise, quantified-self, heart-rate, cardio, training, adventure, explore, fitness, firerunner]\nimage: /images/zone3_data-1.png\n---\n\n\n\n\n# Introduction\nI have discussed the importance of targeted heart-rate zone training numerous times before. This post will show three different trail running workouts on the same 13.15 km (8.17 mile) course with ~300m (984 ft) of elevation gain and loss. The route is an out and back lollipop loop with a majority of the climbing in the first half of the run. The route is a regular workout distance for me and I currently have 54 attempts accumulated over a few years. This provides ample data to look at trends over time and to compare different types of workouts over the same distance.\n\nFrom my trained perspective, the heart rate zones break down as follows:\n\n- 120-155 - **Zone 1** - Nose breathing pace, all-day pace\n- 156-162 - **Zone 2** - Avoid if possible, too hard for Zone 1, too easy for Zone 3\n- 163-173 - **Zone 3** - 1.5-hour pace for me, or many shorter bursts\n- 174-184 - **Zone 4** - Shorter **HARD** efforts\n- 185-195 - **Zone 5** - Pushing max pace/effort\n\n\nWith that background out of the way let's load the libraries.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install Fit File Reader if not already installed\nif(!requireNamespace(\"remotes\")) {\n   install.packages(\"remotes\")\n}\nremotes::install_github(\"grimbough/FITfileR\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(FITfileR)\nlibrary(tidyverse)\n```\n:::\n\n\n\nPull in a Zone 1 workout, arrange it by time-stamp and plot the latitude and longitude (removing exact coordinates). \n\n::: {.cell}\n\n```{.r .cell-code}\nRunZone1 <- readFitFile(\"~/DATA/data/local-route-zone1.fit\") # load file\nRunZone1 <- records(RunZone1) %>% bind_rows() %>% arrange(timestamp)\n\n\n\nLocalRunplot1 <- ggplot(RunZone1, aes(x = position_long, y = position_lat)) +\n                      coord_quickmap() + \n                      geom_point() + \n                      theme(axis.text.x=element_blank(),\n                      axis.ticks.x=element_blank(),\n                      axis.text.y=element_blank(),\n                      axis.ticks.y=element_blank() \n                      )\nLocalRunplot1\n```\n\n::: {.cell-output-display}\n![](2023-09-01-explorer-exercise-3_files/figure-html/zone1_data-1.png){width=672}\n:::\n:::\n\n\nThe heart rate zones do not record on the watch, only the heart rate values at each second interval. Here we make a new variable that is defined by the heart rate zones mentioned in the introduction. I add a manual color vector for the plotting so that all the plots are consistent with one another and with previous posts. And finally, just to keep things tidy, I also add a seconds column of data.\n\n::: {.cell}\n\n```{.r .cell-code}\nRunZone1$HRzone <- cut(RunZone1$heart_rate,c(0,120,158,164,173,184, 200))\nlevels(RunZone1$HRzone) <- c(\"R\",\"Z1\",\"Z2\",\"Z3\",\"Z4\",\"Z5\")\ncols3 <- c(\"R\" = \"#d4d4d4\",  \"Z1\" = \"#5192cb\", \"Z2\" = \"#4cbd57\", \n          \"Z3\" = \"#e4e540\", \"Z4\"= \"#ffb217\", \"Z5\" = \"#ff5733\", \"NA\" = \"#454545\")\nRunZone1$seconds <- as.numeric(rownames(RunZone1))\n```\n:::\n\n\n\nNow we can plot the entire workout and color it by the heart rate zones. This workout is primarily a Zone 1 workout, so you can see that most of the time is spent in Zone 1 (blue).\n\n::: {.cell}\n\n```{.r .cell-code}\nz1_p <- ggplot(RunZone1, aes(x=seconds,  y=heart_rate, col=HRzone)) +\n      geom_point() +\n      scale_x_continuous(name=\"Time (Seconds)\") +\n      scale_y_continuous(name=\"Heart Rate (Beats Per Minute)\") +\n      scale_color_manual(values = cols3)\nz1_p\n```\n\n::: {.cell-output-display}\n![](2023-09-01-explorer-exercise-3_files/figure-html/latlong_plot-1.png){width=672}\n:::\n:::\n\n\n\nHere I do the same process as above for a Zone 1/Zone 2 workout. The plot shows a shift to the higher end of Zone 1 with more Zone 2. \n\n::: {.cell}\n\n```{.r .cell-code}\nRunZone2 <- readFitFile(\"~/DATA/data/local-route-zone1-2.fit\") # load file\nRunZone2 <- records(RunZone2) %>% bind_rows() %>% arrange(timestamp)\n\nRunZone2$HRzone <- cut(RunZone2$heart_rate,c(0,120,158,164,173,184, 200))\nlevels(RunZone2$HRzone) <- c(\"R\",\"Z1\",\"Z2\",\"Z3\",\"Z4\",\"Z5\")\nRunZone2$seconds <- as.numeric(rownames(RunZone2))\n\nz2_p <- ggplot(RunZone2, aes(x=seconds,  y=heart_rate, col=HRzone)) +\n      geom_point() +\n      scale_x_continuous(name=\"Time (Seconds)\") +\n      scale_y_continuous(name=\"Heart Rate (Beats Per Minute)\") +\n      scale_color_manual(values = cols3)\nz2_p\n```\n\n::: {.cell-output-display}\n![](2023-09-01-explorer-exercise-3_files/figure-html/zone1_2_data-1.png){width=672}\n:::\n:::\n\n\nThe run below is a Zone3/Zone4 heart rate zone run. This is my fastest time to date on this route at 1:00:31. I am shooting for a sub 1 hour next time I do a hard effort like this! The heart rate zones are shifted all the way up into Zone 3 (yellow) and Zone 4 (orange) with a few times I tipped into Zone 5. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nRunZone3 <- readFitFile(\"~/DATA/data/local-route-zone3-FKT.fit\") # load file\nRunZone3 <- records(RunZone3) %>% bind_rows() %>% arrange(timestamp)\n\nRunZone3$HRzone <- cut(RunZone3$heart_rate,c(0,120,158,164,173,184, 200))\nlevels(RunZone3$HRzone) <- c(\"R\",\"Z1\",\"Z2\",\"Z3\",\"Z4\",\"Z5\")\nRunZone3$seconds <- as.numeric(rownames(RunZone3))\n\nz3_p <- ggplot(RunZone3, aes(x=seconds,  y=heart_rate, col=HRzone)) +\n      geom_point() +\n      scale_x_continuous(name=\"Time (Seconds)\") +\n      scale_y_continuous(name=\"Heart Rate (Beats Per Minute)\") +\n      scale_color_manual(values = cols3)\nz3_p\n```\n\n::: {.cell-output-display}\n![](2023-09-01-explorer-exercise-3_files/figure-html/zone3_data-1.png){width=672}\n:::\n:::\n\n\n---\n\nWe will do some detailed comparisons in another post, but here we can make plots of the heart rate data as the number of seconds in each heart rate zone. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nz1_p2 <- ggplot(RunZone1, aes(x=HRzone, fill=HRzone)) +\n      geom_bar() +\n      scale_y_continuous(name=\"Total Seconds in Heart Rate Zone\") +\n      scale_fill_manual(values = cols3)\n\n\nz2_p2 <- ggplot(RunZone2, aes(x=HRzone, fill=HRzone)) +\n      geom_bar() +\n      scale_y_continuous(name=\"Total Seconds in Heart Rate Zone\") +\n      scale_fill_manual(values = cols3)\n\n\nz3_p2 <- ggplot(RunZone3, aes(x=HRzone, fill=HRzone)) +\n      geom_bar() +\n      scale_y_continuous(name=\"Total Seconds in Heart Rate Zone\") +\n      scale_fill_manual(values = cols3)\n```\n:::\n\n\nThese really show the shift from Zone 1 --> Zone 1/2 --> Zone 3/4. Plot them all and scroll down to compare.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nz1_p2\n```\n\n::: {.cell-output-display}\n![](2023-09-01-explorer-exercise-3_files/figure-html/zone123_bar_viz-1.png){width=672}\n:::\n\n```{.r .cell-code}\nz2_p2\n```\n\n::: {.cell-output-display}\n![](2023-09-01-explorer-exercise-3_files/figure-html/zone123_bar_viz-2.png){width=672}\n:::\n\n```{.r .cell-code}\nz3_p2\n```\n\n::: {.cell-output-display}\n![](2023-09-01-explorer-exercise-3_files/figure-html/zone123_bar_viz-3.png){width=672}\n:::\n:::\n\n\nWe will revisit these data to do more comparisons over the different parts of the workout course. If you are interested in other posts in this explorer series check out [Explorer Fitness 1](/posts/2023-07-07-explorer-exercise-1.html), [Explorer Fitness 2](/posts/2023-07-21-explorer-exercise-2.html), and [Trail Running Training](/posts/2022-08-15-trailrunningtrainingdata/).\n",
    "supporting": [
      "2023-09-01-explorer-exercise-3_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}