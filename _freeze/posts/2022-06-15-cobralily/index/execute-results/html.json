{
  "hash": "3b6ac56909f0b03b7962add0a8d00fb1",
  "result": {
    "markdown": "---\ntitle: California Pitcher Plant \ndescription: --Cobra Lily (Darlingtonia californica)\ndate: 2022-06-15\nauthor: RJ Cody Markelz\ncategories: [species distribution, GIS, maps, data, trail run, exercise, explore, cobra lily, illustration]\nimage: /images/Cobra_lily_sketch.png\n---\n\n\n\n\n<p align=\"Left\">\n  <img src=\"/images/Cobra_lily_sketch.png\" alt=\"Cobra Lily Sketch\" height=\"300\"/>\n</p>\n\n\nSpring is in full swing in the higher elevations around Mount Shasta and the surrounding ranges. I am always struck by the large patches of [Cobra Lilies](https://www.fs.fed.us/wildflowers/beauty/serpentines/communities/darlingtonia.shtml) that grow along nutrient poor seeps in alpine meadows. I nearly always stop to take some photos and take in all the cool colors and shapes when out on training runs or hikes. I have made many observations of these over the past few years, but here is a quick post to pull out observations from GBIF.\n\nLoad the libraries.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(rgbif)\nlibrary(gpx)\n```\n:::\n\nMake the large Northern California polygon to look for observations in GBIF.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnorcal_geometry <- paste('POLYGON((-124.4323 42.0021, -121.5045 42.0021, -121.5045 40.194, -124.4323 40.194, -124.4323 42.0021))')\n\ncobra_lily <- occ_data(scientificName = \"darlingtonia californica\", hasCoordinate = TRUE, limit = 1000,\n                   geometry = norcal_geometry)\nhead(cobra_lily)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$meta\n$meta$offset\n[1] 900\n\n$meta$limit\n[1] 100\n\n$meta$endOfRecords\n[1] FALSE\n\n$meta$count\n[1] 1582\n\n\n$data\n# A tibble: 1,000 × 128\n   key    scien…¹ decim…² decim…³ issues datas…⁴ publi…⁵ insta…⁶ hosti…⁷ publi…⁸\n   <chr>  <chr>     <dbl>   <dbl> <chr>  <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 45123… Darlin…    41.7   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 2 45163… Darlin…    41.9   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 3 45191… Darlin…    41.9   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 4 45253… Darlin…    41.9   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 5 45280… Darlin…    41.7   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 6 40286… Darlin…    41.9   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 7 40347… Darlin…    40.7   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 8 40394… Darlin…    41.6   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n 9 41655… Darlin…    41.8   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n10 40629… Darlin…    41.9   -124. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n# … with 990 more rows, 118 more variables: protocol <chr>, lastCrawled <chr>,\n#   lastParsed <chr>, crawlId <int>, basisOfRecord <chr>,\n#   occurrenceStatus <chr>, taxonKey <int>, kingdomKey <int>, phylumKey <int>,\n#   classKey <int>, orderKey <int>, familyKey <int>, genusKey <int>,\n#   speciesKey <int>, acceptedTaxonKey <int>, acceptedScientificName <chr>,\n#   kingdom <chr>, phylum <chr>, order <chr>, family <chr>, genus <chr>,\n#   species <chr>, genericName <chr>, specificEpithet <chr>, taxonRank <chr>, …\n```\n:::\n:::\n\nQuick map of observations.\n\n::: {.cell}\n\n```{.r .cell-code}\ncobra_lily_coords <- cobra_lily$data[ , c(\"decimalLongitude\", \"decimalLatitude\", \"occurrenceStatus\", \"coordinateUncertaintyInMeters\", \"institutionCode\", \"references\")]\n\nmaps::map(database = \"state\", region = \"california\")\npoints(cobra_lily_coords[ , c(\"decimalLongitude\", \"decimalLatitude\")], pch = \".\", col = \"red\", cex = 3)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nPull in my run data using the gpx R library and subset the route to make plotting easier.\n\n::: {.cell}\n\n```{.r .cell-code}\nrun <-  read_gpx('~/DATA/data/cobra_lily_run.gpx')\nTrailRun1 <- as.data.frame(run$routes)\n```\n:::\n\n\nMake a quick run plot.\n\n::: {.cell}\n\n```{.r .cell-code}\nTrailRun_plot <- ggplot() +\n          geom_point(data = TrailRun1, aes(x = Longitude, y = Latitude), color = 'black') +\n          xlab(\"Longitude\") + ylab(\"Latitude\")\nTrailRun_plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nSubset the larger California dataset to only include a zoomed in portion where I ran based on the maximum and minimum coordinates from the run plot above.\n\n::: {.cell}\n\n```{.r .cell-code}\ncobra_lily_coords_sub <- subset(cobra_lily_coords, decimalLatitude > 41.3 & decimalLatitude < 41.365 & decimalLongitude > -122.6 & decimalLongitude < -122.5 )\n```\n:::\n\n\nOverlay the plots and add a triangle for the seep where I observed some Cobra Lilies next to the trail.\n\n::: {.cell}\n\n```{.r .cell-code}\nTrailRun_plot2 <- ggplot() +\n          coord_quickmap() +\n          geom_point(data = TrailRun1, aes(x = Longitude, y = Latitude), color = 'black') +\n          geom_point(data=cobra_lily_coords_sub, aes(x = decimalLongitude, y = decimalLatitude), color = 'red') +\n          geom_point(aes(x = -122.55, y = 41.325), pch=25, size= 12, colour=\"purple\") +\n          xlab(\"Longitude\") + ylab(\"Latitude\")\nTrailRun_plot2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nIn a follow-up post we will import some additional environmental data to make a multi-layered map.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}