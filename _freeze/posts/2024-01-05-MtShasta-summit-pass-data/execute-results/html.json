{
  "hash": "e1377a7bb70d7a02f0e35fdddedd5e79",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle:  Mount Shasta Summit Pass Data\nauthor: RJ Cody Markelz\ndescription: --Visualizing Search and Rescue Data\ndate: 2024-1-5\ncategories: [data, meta-data, research, journalism, data journalism, avalanche, ski touring, back country skiing, search and rescue, mount shasta]\nimage: /images/pass-sar-metrics.png\n---\n\n\n\n\n\nI am collaborating with the [Mount Shasta Avalanche Center](https://www.shastaavalanche.org/#/) to visualize data sets and build models to help them forecast avalanches in the area better. A small dataset that they have been collecting since 1992 is the number of Summit Passes sold along with the [Search and Rescue (SAR)](https://en.wikipedia.org/wiki/Search_and_rescue) activities that the Rangers perform. This data is available in the [Avalanche Center Annual Reports and SAR statistics](https://www.shastaavalanche.org/page/annual-reports). \n\nSee the other posts in the Avalanche Data series: [Post 1](/posts/2023-09-21-scraping-weather-data-setup.html), [Post 2](/posts/2023-09-22-scraping-weather-data.html), [Post 3](/posts/2023-09-23-summarizing-weather-data.html) and [Post 4](/posts/2023-10-01-avalanche-data-animation.html).\n\nHere are a few plots I made for the upcoming reports. \n\nLoad the libraries and in-file the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(gridExtra)\n\n# Read in the CSV file\npass_data <- read.csv(\"~/DATA/data/mount-shasta-summit-pass-data.csv\")\n```\n:::\n\n\n\nI always take a quick look at the data to make sure it infiled correctly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pass_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  YEAR SUMMIT.PASSES.SOLD FATALITIES SEARCH RESCUE SELF.RESCUE Total\n1 1992                  0          0      0      3           0     0\n2 1992                  0          0      0      0           0     0\n3 1993                  0          1      0      3           0     0\n4 1994                  0          1      0      4           0     0\n5 1995                  0          1      0      3           0     0\n6 1996                  0          0      0      4           0     0\n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(pass_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      YEAR      SUMMIT.PASSES.SOLD   FATALITIES         SEARCH      \n Min.   :1992   Min.   :   0       Min.   :0.0000   Min.   : 0.000  \n 1st Qu.:1999   1st Qu.:4532       1st Qu.:0.0000   1st Qu.: 1.000  \n Median :2008   Median :5592       Median :1.0000   Median : 3.000  \n Mean   :2008   Mean   :5084       Mean   :0.8182   Mean   : 2.941  \n 3rd Qu.:2016   3rd Qu.:6758       3rd Qu.:1.0000   3rd Qu.: 4.000  \n Max.   :2024   Max.   :9349       Max.   :3.0000   Max.   :10.000  \n                                   NA's   :1                        \n     RESCUE        SELF.RESCUE         Total      \n Min.   : 0.000   Min.   : 0.000   Min.   : 0.00  \n 1st Qu.: 4.000   1st Qu.: 0.000   1st Qu.: 9.00  \n Median : 6.000   Median : 2.000   Median :11.50  \n Mean   : 8.029   Mean   : 4.441   Mean   :15.62  \n 3rd Qu.:10.000   3rd Qu.: 5.750   3rd Qu.:20.00  \n Max.   :32.000   Max.   :20.000   Max.   :54.00  \n                                                  \n```\n\n\n:::\n:::\n\n\n\n\nTransform the data into long format for easier plotting.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_long <- pass_data %>% \n  pivot_longer(cols = c(\"FATALITIES\", \"SEARCH\",\"RESCUE\",\"SELF.RESCUE\"), \n               names_to = \"variable\", \n               values_to = \"value\")\n```\n:::\n\n\n\nCreate the base plots for summit passes sold and the other Search and Rescue statistics collected. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummit_pass1 <- ggplot() +\n  geom_line(data = pass_data, aes(x = YEAR, y = SUMMIT.PASSES.SOLD), color = \"blue\", size = 1) +\n  scale_y_continuous(name = \"Summit Passes Sold\") +\n  theme_minimal() +\n  labs(x = \"Year\")\nsummit_pass1\n```\n\n::: {.cell-output-display}\n![](2024-01-05-MtShasta-summit-pass-data_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nSAR_1 <- ggplot() +\n  geom_bar(data = data_long, aes(x = YEAR, y = value, fill = variable), stat = \"identity\", position = position_dodge()) +\n  scale_y_continuous(name = \"Number of Incidents\") +\n  theme_minimal() +\n  labs( x = \"Year\", fill = \"\")\nSAR_1\n```\n\n::: {.cell-output-display}\n![](2024-01-05-MtShasta-summit-pass-data_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n\n\nI like to default to a minimal theme to see how it looks and then add gridlines and color back to the plots. Minimal plots are great for people who are used to looking at plots, however the end readers of this report are mostly from the general public so I decided to add in each year along the x-axis. I want to stack the plots so I will also move the legend for the SAR data to the bottom. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummit_pass2 <- ggplot() +\n  geom_line(data = pass_data, aes(x = YEAR, y = SUMMIT.PASSES.SOLD), color = \"blue\", size = 1) +\n  scale_x_continuous(breaks = seq(1992, 2024, 1))  +\n  scale_y_continuous(name = \"Summit Passes Sold\") +\n  theme(axis.text.x = element_text(angle = -75, vjust = 0.5)) +\n  labs(x = \"Year\")\nsummit_pass2\n```\n\n::: {.cell-output-display}\n![](2024-01-05-MtShasta-summit-pass-data_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nSAR_2 <- ggplot() +\n  geom_bar(data = data_long, aes(x = YEAR, y = value, fill = variable), stat = \"identity\", position = position_dodge()) +\n  scale_x_continuous(breaks = seq(1992, 2024, 1))  +\n  scale_y_continuous(name = \"Number of Incidents\") +\n  theme(legend.position=\"bottom\", \n        axis.text.x = element_text(angle = -75, vjust = 0.5)) +\n  labs( x = \"Year\", fill = \"\")\nSAR_2\n```\n\n::: {.cell-output-display}\n![](2024-01-05-MtShasta-summit-pass-data_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n:::\n\n\n\nUsing the gridExtra package we can combine the plots we already generated.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_plot <- grid.arrange(summit_pass2, SAR_2)\n```\n\n::: {.cell-output-display}\n![](2024-01-05-MtShasta-summit-pass-data_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncombined_plot\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTableGrob (2 x 1) \"arrange\": 2 grobs\n  z     cells    name           grob\n1 1 (1-1,1-1) arrange gtable[layout]\n2 2 (2-2,1-1) arrange gtable[layout]\n```\n\n\n:::\n:::\n\n\n\nThese plots are going to be published and printed so we want to make sure they are large enough and have at least a 300 dpi resolution.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(plot = summit_pass2, \"~/DATA/images/summit-passes.png\", width = 10, dpi = 300)\n\nggsave(plot = SAR_2, \"~/DATA/images/sar-metrics.png\", width = 10, dpi = 300)\n\nggsave(plot = combined_plot, \"~/DATA/images/pass-sar-metrics.png\", width = 10, height = 8, dpi = 300)\n```\n:::\n\n\nThere we have it. Some basic tidy-verse plots for inclusion in the Annual and SAR reports. \n\nSee the other posts in the Avalanche Data series: [Post 1](/posts/2023-09-21-scraping-weather-data-setup.html), [Post 2](/posts/2023-09-22-scraping-weather-data.html), [Post 3](/posts/2023-09-23-summarizing-weather-data.html) and [Post 4](/posts/2023-10-01-avalanche-data-animation.html).",
    "supporting": [
      "2024-01-05-MtShasta-summit-pass-data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}