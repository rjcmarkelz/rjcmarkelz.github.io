{
  "hash": "72098381390300c050344ed1df2b97f7",
  "result": {
    "markdown": "---\ntitle: Trinity Alps Trail Run \ndescription: --White Pines Revisited\nauthor: RJ Cody Markelz\ndate: 2023-01-07\ncategories: [species distribution, modeling, GIS, maps, data, trail run, exercise, explore, illustration]\nimage: /images/westernwhitepinecone-web.png\n---\n\n\n\n<img src=\"/images/westernwhitepinecone-web.png\" \nalt=\"Western White Pine Cone Illustration\"\nheight=\"600\" />\n[Western White Pine](https://en.wikipedia.org/wiki/Western_white_pine) Cone Illustration\n\n# Introduction\nI recently revisited one the conifer species that occur in the [Miracle Mile](/posts/2021-04-26-gbif-miracle-mile-species/index.html), but by trail running in the Trinity Alps Wilderness area in the Klamath range of Northern California. I found a number of cool species, but one recognizable one was the [Western White Pine](https://en.wikipedia.org/wiki/Western_white_pine) (*Pinus monticola*). *Pinus monticola* is found in many of the cool trail running spots I frequent. Here is another [post](/posts/2022-04-01-foxtailpinetrailrun/index.html) about another trail run with *Pinus monticola*.\n\nLoad the libraries.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gpx)\nlibrary(rgbif)\n```\n:::\n\n\nIn-file the trail run gps data and make a data frame to use for plotting.\n\n::: {.cell}\n\n```{.r .cell-code}\nrun <-  read_gpx('~/DATA/data/Trinity-Alps-TrailRunning-2022-10-08-route.gpx')\nsummary(run)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          Length Class  Mode\nroutes    1      -none- list\ntracks    1      -none- list\nwaypoints 1      -none- list\n```\n:::\n\n```{.r .cell-code}\nTrailRun1 <- as.data.frame(run$routes)\nTrailRun1$Time <- as.numeric(row.names(TrailRun1))\n```\n:::\n\n\nMake a quick plot using the latitude and longitude coordinates.\n\n::: {.cell}\n\n```{.r .cell-code}\nTR_p1 <- ggplot() +\n          geom_point(data = TrailRun1, aes(x = Longitude, y = Latitude), color = 'black', size = 2) +\n          xlab(\"Longitude\") + ylab(\"Latitude\")\nTR_p1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nTake a look at the elevation profile of the run.\n\n::: {.cell}\n\n```{.r .cell-code}\nTR_p2 <- ggplot() +\n          geom_line(data = TrailRun1, aes(x = Time, y = Elevation), color = 'black', size = 2) +\n          xlab(\"Time (seconds)\") + ylab(\"Elevation (m)\")\nTR_p2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\nWe can also plot the run and false color it based on the elevation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTR_p3 <- ggplot() +\n          geom_point(data = TrailRun1, aes(x = Longitude, y = Latitude, color = Elevation), size = 2) +\n          scale_color_continuous(limits=c(800,2800))\nTR_p3\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nUsing the Latitude and Longitude coordinates of the area we can make a general area polygon to be used for a GBIF species observation query to the public database.\n\n::: {.cell}\n\n```{.r .cell-code}\ntrinity_geometry <- paste('POLYGON((-122.91 40.88, -122.87 40.88, -122.87 40.96, -122.91 40.96, -122.91 40.88))')\n\nmm_species <- c(\"pinus monticola\") # can add multiple species here for larger query\n\nwhitepine_data <- occ_data(scientificName = mm_species, hasCoordinate = TRUE, limit = 10000,\n                   geometry = trinity_geometry)\nwhitepine_data\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRecords found [5] \nRecords returned [5] \nArgs [hasCoordinate=TRUE, occurrenceStatus=PRESENT, limit=10000, offset=0,\n     scientificName=pinus monticola, geometry=POLYGON((-122.91 40.88, -122.87\n     40.88, -122.87 40.96, -122.91 40.96, -122.91 40.88))] \n# A tibble: 5 × 78\n  key     scien…¹ decim…² decim…³ issues datas…⁴ publi…⁵ insta…⁶ hosti…⁷ publi…⁸\n  <chr>   <chr>     <dbl>   <dbl> <chr>  <chr>   <chr>   <chr>   <chr>   <chr>  \n1 396113… Pinus …    40.9   -123. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n2 396097… Pinus …    40.9   -123. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n3 338409… Pinus …    40.9   -123. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n4 239748… Pinus …    40.9   -123. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n5 254089… Pinus …    40.9   -123. cdc,c… 50c950… 28eb1a… 997448… 28eb1a… US     \n# … with 68 more variables: protocol <chr>, lastCrawled <chr>,\n#   lastParsed <chr>, crawlId <int>, basisOfRecord <chr>,\n#   occurrenceStatus <chr>, taxonKey <int>, kingdomKey <int>, phylumKey <int>,\n#   classKey <int>, orderKey <int>, familyKey <int>, genusKey <int>,\n#   speciesKey <int>, acceptedTaxonKey <int>, acceptedScientificName <chr>,\n#   kingdom <chr>, phylum <chr>, order <chr>, family <chr>, genus <chr>,\n#   species <chr>, genericName <chr>, specificEpithet <chr>, taxonRank <chr>, …\n```\n:::\n\n```{.r .cell-code}\nwhitepine_coords <- whitepine_data$data[ , c(\"decimalLongitude\", \"decimalLatitude\", \"occurrenceStatus\", \"coordinateUncertaintyInMeters\",\n  \"institutionCode\", \"references\")]\n```\n:::\n\n\nPlot the observations on the California map to see the limited polygon sampled.\n\n::: {.cell}\n\n```{.r .cell-code}\nmaps::map(database = \"state\", region = \"california\")\npoints(whitepine_coords[ , c(\"decimalLongitude\", \"decimalLatitude\")], pch = \".\", col = \"red\", cex = 3)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nPlot all of the observations using ggplot for the zoomed in area.\n\n::: {.cell}\n\n```{.r .cell-code}\nwhitepine_plot1  <- ggplot(whitepine_coords, aes(x=decimalLongitude, y = decimalLatitude)) +\n                             geom_point(color='red') + labs(title = \"MM Zone\")\nwhitepine_plot1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nCombine trail running and Western White Pine occurrence observations.\n\n::: {.cell}\n\n```{.r .cell-code}\nrun_plot2 <- ggplot() +\n          coord_quickmap() +\n          geom_point(data = TrailRun1, aes(x = Longitude, y = Latitude), color = 'black') +\n          geom_point(data = whitepine_coords, aes(x = decimalLongitude, y = decimalLatitude), color = 'red') +\n          xlab(\"Longitude\") + ylab(\"Latitude\")\nrun_plot2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\nNow to see a random sampling of what other species are also in the area of the trail run.\n\n::: {.cell}\n\n```{.r .cell-code}\ntrinity_species <- occ_data(hasCoordinate = TRUE, limit = 5000,\n                         geometry = trinity_geometry)\n\ntrinity_species_coords <- trinity_species$data[ , c(\"scientificName\",\"phylum\", \"order\", \"family\", \"decimalLongitude\", \"decimalLatitude\",\"occurrenceStatus\", \"coordinateUncertaintyInMeters\",\"institutionCode\", \"references\")]  \n```\n:::\n\n\nPlot the run data, White Pine data, and other species data on the same map. I changed the size of the trail running and White Pine points so they are easier to see. I also just plotted things by Phylum as to not overload the plot by doing all the species!\n\n::: {.cell}\n\n```{.r .cell-code}\nrun_phylum_plot <- ggplot() +\n        geom_point(data = TrailRun1, aes(x = Longitude, y = Latitude), color = 'black', size = .75) +\n        geom_point(data = trinity_species_coords, aes(x = decimalLongitude, y = decimalLatitude, color = phylum)) +\n        geom_point(data = whitepine_coords, aes(x = decimalLongitude, y = decimalLatitude), color = 'red', size = 5, shape = 19) +\n        xlab(\"Longitude\") + ylab(\"Latitude\")\nrun_phylum_plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\nYou can see that there are various species to explore representing Arthropods (Insects, Spiders etc.), Cordates (Animals), Bisidomycota (fungi), and Tracheophyta (vascular plants).\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}