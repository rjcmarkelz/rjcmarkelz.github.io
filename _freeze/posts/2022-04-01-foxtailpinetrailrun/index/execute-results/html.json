{
  "hash": "42809169727d0f2abdb491f877871d4b",
  "result": {
    "markdown": "---\ntitle: Miracle Mile Species 2 and 3\ndescription: --Foxtail Pine and Western White Pine\nauthor: RJ Cody Markelz\ndate: 2022-04-01\ncategories: [species distribution, modeling, GIS, maps, data, trail run, exercise, explore]\nimage: /images/WesternWhitePineCone_web.jpg\n---\n\n\n\n\n<p align=\"Left\">\n  <img src=\"/images/Foxtail_Pine.png\" alt=\"foxtail pine illustration\" height=\"300\"/>\n</p>\n[Foxtail Pine](https://en.wikipedia.org/wiki/Pinus_balfouriana)\n\n\n<p align=\"Left\">\n  <img src=\"/images/WesternWhitePineCone_web.jpg\" alt=\"western white pine illustration\" height=\"300\"/>\n</p>\n[Western White Pine](https://en.wikipedia.org/wiki/Western_white_pine)\n\nContinuing to check off the conifer species that occur in the [Miracle Mile](/posts/gbif-miracle-mile-species/) so I can make a visit and try to ID all of them. Last summer I found some Foxtail Pine (*Pinus balfouriana*) and (*Pinus monticola*) near Mount Eddy in the Klammath Range (among others).\n\nLoad the libraries.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rgbif)\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(maps)\n```\n:::\n\n\nLoad the data.\n\n::: {.cell}\n\n```{.r .cell-code}\nski_data <- read.csv(\"~/DATA/data/SkiTouring.csv\")\nTrailRun1 <- read.csv(\"~/DATA/data/TrailRun_FoxtailPine.csv\")\n```\n:::\n\n\nMake a quick plot using the latitude and longitude coordinates and color by the date of the tour.\n\n::: {.cell}\n\n```{.r .cell-code}\nrun1 <- ggplot(TrailRun1, aes(x = position_long, y = position_lat)) +\n                    coord_quickmap() + geom_point()\nrun1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nMake a general area polygon for GBIF and query the database to see if there are public observations of our two species of interest in the general region I ran in.\n\n::: {.cell}\n\n```{.r .cell-code}\nnorcal_geometry <- paste('POLYGON((-122.6 41.35, -122.35 41.35, -122.35 41.25, -122.4 41.25, -122.6 41.25, -122.6 41.35))')\n\nmm_species <- c(\"pinus balfouriana\", \"pinus monticola\")\n\nfoxtail_data <- occ_data(scientificName = mm_species, hasCoordinate = TRUE, limit = 10000,\n                   geometry = norcal_geometry)\n\nfoxtail_coords <- foxtail_data$data[ , c(\"decimalLongitude\", \"decimalLatitude\",\n \"individualCount\", \"occurrenceStatus\", \"coordinateUncertaintyInMeters\",\n  \"institutionCode\", \"references\")]\n\nmm_all <- occ_data(scientificName = mm_species, hasCoordinate = TRUE, limit = 10000,\n                   geometry = norcal_geometry)\nmm_species_coords_list <- vector(\"list\", length(mm_species))\nnames(mm_species_coords_list) <- mm_species\nhead(mm_species_coords_list)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$`pinus balfouriana`\nNULL\n\n$`pinus monticola`\nNULL\n```\n:::\n:::\n\n\nLoop through and make a dataframe from the lists.\n\n::: {.cell}\n\n```{.r .cell-code}\nfor (x in mm_species) {\n  coords <- mm_all[[x]]$data[ , c(\"decimalLongitude\", \"decimalLatitude\", \"occurrenceStatus\", \"coordinateUncertaintyInMeters\", \"institutionCode\", \"references\")]\n  mm_species_coords_list[[x]] <- data.frame(species = x, coords)\n}\n\ntree_df <- rbindlist(mm_species_coords_list, fill = T)\n```\n:::\n\n\nJust take a quick look at the raw observations plotted by latitude and longitude. Plot the species on the California map to see the limited polygon sampled.\n\n::: {.cell}\n\n```{.r .cell-code}\nmaps::map(database = \"state\", region = \"california\")\npoints(tree_df[ , c(\"decimalLongitude\", \"decimalLatitude\")], pch = \".\", col = \"blue\", cex = 3)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nPlot all of the species using ggplot for the zoomed in area.\n\n::: {.cell}\n\n```{.r .cell-code}\nrun_plot1  <- ggplot(tree_df, aes(x=decimalLongitude, y = decimalLatitude, color = species)) +\n                             geom_point() + labs(color = \"Species\", title = \"MM Zone\")\nrun_plot1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nCombine trail running and species occurrence observations.\n\n::: {.cell}\n\n```{.r .cell-code}\nrun_plot2 <- ggplot() +\n          coord_quickmap() +\n          geom_point(data = TrailRun1, aes(x = position_long, y = position_lat), color = 'black') +\n          geom_point(data=tree_df, aes(x = decimalLongitude, y = decimalLatitude, color = factor(species))) +\n          xlab(\"Longitude\") + ylab(\"Latitude\") + labs(color='Species')\nrun_plot2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}